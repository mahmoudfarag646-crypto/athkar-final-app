# دليل نشر تطبيق "حصني" على متاجر التطبيقات

لقد تم تجهيز كود هذا المشروع ليعمل كتطبيق هجين (Hybrid App) باستخدام تقنية **Capacitor**.
اتبع الخطوات التالية بدقة لتحويل الكود إلى تطبيق Android و iOS.

## المتطلبات المسبقة (على جهاز الكمبيوتر)
1. **Node.js**: تأكد من تثبيته (الإصدار 18 أو أحدث).
2. **Android Studio**: لنشر تطبيق الأندرويد.
3. **Xcode**: لنشر تطبيق الآيفون (يتطلب جهاز Mac).

---

## الخطوة 1: إعداد المشروع محلياً

بعد تنزيل ملفات المشروع على جهازك، افتح "Terminal" أو "CMD" داخل مجلد المشروع ونفذ الأوامر التالية بالترتيب:

```bash
# 1. تثبيت المكتبات
npm install

# 2. تثبيت أدوات Capacitor الأساسية
npm install @capacitor/core
npm install -D @capacitor/cli

# 3. تهيئة التطبيق (سيتم إنشاء ملف capacitor.config.ts)
npx cap init "Athkar AI" "com.athkar.app" --web-dir=dist

# 4. تثبيت منصات الموبايل
npm install @capacitor/android @capacitor/ios
npx cap add android
npx cap add ios
```

---

## الخطوة 2: بناء التطبيق وتحديثه

في كل مرة تقوم فيها بتعديل كود الويب (ملفات .tsx أو .css)، يجب عليك تنفيذ أمرين لتنعكس التعديلات على تطبيق الموبايل:

```bash
# بناء نسخة الويب
npm run build

# نسخ التعديلات إلى مجلدات الأندرويد والآيفون
npx cap sync
```

---

## الخطوة 3: النشر على Google Play (Android)

1. **إعداد الأيقونات**:
   - ضع أيقونة التطبيق (512x512) في مجلد المشروع.
   - يفضل استخدام أداة مثل `capacitor-assets` لتوليد الأيقونات بجميع المقاسات.

2. **فتح المشروع**:
   نفذ الأمر التالي لفتح Android Studio:
   ```bash
   npx cap open android
   ```

3. **إنشاء ملف التثبيت (APK/Bundle)**:
   - من القائمة العلوية في Android Studio: اختر **Build** > **Generate Signed Bundle / APK**.
   - اختر **Android App Bundle** (هذا هو الصيغة المطلوبة لمتجر جوجل).
   - ستحتاج لإنشاء "KeyStore" (ملف توقيع إلكتروني) -> **احتفظ به في مكان آمن جداً**، بدونه لن تستطيع تحديث التطبيق مستقبلاً.

4. **الرفع للمتجر**:
   - اذهب إلى [Google Play Console](https://play.google.com/console).
   - أنشئ تطبيقاً جديداً وارفع ملف `.aab` الذي تم إنتاجه.
   - املأ البيانات (الوصف، الصور، الفئة).

---

## الخطوة 4: النشر على App Store (iOS)

*ملاحظة: يتطلب جهاز Mac.*

1. **فتح المشروع**:
   نفذ الأمر التالي لفتح Xcode:
   ```bash
   npx cap open ios
   ```

2. **الإعدادات**:
   - في Xcode، اضغط على "App" من القائمة اليسرى.
   - اذهب إلى تبويب **Signing & Capabilities**.
   - اختر حساب المطور الخاص بك (Team) - يتطلب اشتراك Apple Developer (99$/سنة).

3. **الأرشيف والرفع**:
   - تأكد من اختيار **Any iOS Device (arm64)** من قائمة الأجهزة في الأعلى.
   - من القائمة العلوية: اختر **Product** > **Archive**.
   - بعد انتهاء البناء، ستفتح نافذة "Organizer". اضغط **Distribute App** واتبع الخطوات للرفع إلى **App Store Connect**.

4. **النشر**:
   - اذهب إلى [App Store Connect](https://appstoreconnect.apple.com).
   - ستجد النسخة في قسم TestFlight أولاً، ثم يمكنك نقلها للإنتاج (Production) وإرسالها للمراجعة.

---

## نصائح هامة
- **الكاميرا**: تأكدنا من إضافة إذن الكاميرا في الملفات، لكن عند الرفع قد يسألك المتجر عن سبب استخدام الكاميرا. الإجابة هي: "لمسح صور الأذكار وتحويلها لنص".
- **تحديث التطبيق**: إذا أردت تحديث التطبيق لاحقاً، قم بتغيير رقم الإصدار (Version) في ملف `package.json` وأعد تنفيذ الخطوات من "الخطوة 2".
